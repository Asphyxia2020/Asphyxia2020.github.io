---
tag: [Compiling pricinple]
catalog: true
header-img: img\blog5.jpg 
---  
> <font color = "blue" face = "楷体">只是单纯地想念一个人也是如此的美好   
> ——liuhaihua</font>  
## 实验目的   
1、	学会针对DFA转换图实现相应的高级语言源程序。  
2、	深刻领会状态转换图的含义，逐步理解有限自动机。  
3、	掌握手工生成词法分析器的方法，了解词法分析器的内部工作原理。  
##	实验内容  
(自己设计的某种计算机语言)的编译程序的词法分析部分实现。  
从左到右扫描每行该语言源程序的符号，拼成单词，换成统一的内部表示（token）送给语法分析程序。
为了简化程序的编写，有具体的要求如下：   
（1）	数包含整型和浮点型。  
（2）	空白符仅仅是空格、回车符、制表符。  
（3）	代码是自由格式。  
（4）	注释应放在花括号之内，并且不允许嵌套  
给出自己的记号定义。举例如下：  
![1](/picture\TINY语言的记号.png)    
## 实验要求          
要求实现编译器的以下功能：         
（1）	按规则拼单词,并转换成二元式形式  
（2）	删除注释行  
（3）	删除空白符 (空格、回车符、制表符)   
（4）	列表打印源程序，按照源程序的行打印，在每行的前面加上行号，并且打印出每行包含的记号的二元形式  
（5）	发现并定位错误  
自己设计的词法分析进行具体的要求：  
（0）	给出词法分析程序使用的状态图(DFA)  
（1）	记号的二元式形式中种类采用枚举方法定义；其中保留字和特殊字符是每个都一个种类，标示符自己是一类，数字是一类；单词的属性就是表示的字符串值。   
（2）	词法分析的具体功能实现是一个函数GetToken()，每次调用都对剩余的字符串分析得到一个单词或记号识别其种类，收集该记号的符号串属性，当识别一个单词完毕，采用返回值的形式返回符号的种类，同时采用程序变量的形式提供当前识别出记号的属性值。   
（3）	标示符和保留字的词法构成相同，为了更好的实现，把语言的保留字建立一个表格存储，这样可以把保留字的识别放在标示符之后，用识别出的标示符对比该表格，如果存在该表格中则是保留字，否则是一般标示符。  
## 实验结果（给出自己的样例及输出结果）  
测试用例：
~~~ 
{Test Token}
if id = 0 then
	read(id);
else
	write(id);
endif;

{Test Error}
错误^_^

{Test Repeat}
num := 20;
repeat
~~~  
![1](/picture\输出结果示例.png)  

- **Soloution**    
	1. 剔除空白和注释（也可以修改文法使得语法中包含空白，但远非易事）
	2. 预读  
	3. 常量：当在输入流中出现一个数位序列时，词法分析器将向语法分析器传送一个词法单元。该词法单元包含终结符号 **num**及根据这些数位计算得到的整型属性值，终结符号`+`没有属性（将词法单元写做元组形式）
	4. 识别关键字和标识符
		1. 语言的文法通常都把标识符当作终结符号进行处理。  
		2. 将保留字作为关键字，使用一个表来保存字符串。使用一个散列表来实现从词素到词法单元的映射。

<style type="text/css">
body {background-color: #F5F5DC}